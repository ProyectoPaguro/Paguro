{% extends "base.html" %}
{% block titulo %}Transferencias{% endblock %}

{% block contenido %}
<h1 class="mb-4 text-primary">ðŸ“¦ Historial de Transferencias</h1>

<form method="get" class="row mb-3 g-2">

  <!-- FILTRO DESTINO -->
  <div class="col-md-4">
    <label class="form-label">Filtrar por destino</label>
    <select name="destino" class="form-select" onchange="this.form.submit()">
      <option value="">Todos</option>
      {% for d in destinos %}
        <option value="{{ d }}" {% if sel_destino == d %}selected{% endif %}>
          {{ d }}
        </option>
      {% endfor %}
    </select>
  </div>

  <!-- FILTRO FECHA -->
  <div class="col-md-4">
    <label class="form-label">Filtrar por fecha</label>
    <input type="date" name="fecha" value="{{ sel_fecha }}" class="form-control"
           onchange="this.form.submit()">
  </div>

</form>

<div class="card shadow-sm">
  <div class="card-body">
    <table class="table table-striped">
      <thead class="table-dark">
        <tr>
          <th>Fecha</th>
          <th>Producto</th>
          <th>Acabado</th>
          <th>Cantidad</th>
          <th>Origen</th>
          <th>Destino</th>
        </tr>
      </thead>

      <tbody>
        {% for t in transferencias %}
        <tr>
          <td>{{ t.fecha.strftime("%Y-%m-%d %H:%M") }}</td>
          <td>{{ t.producto_nombre }}</td>
          <td>{{ t.acabado }}</td>
          <td>{{ t.cantidad }}</td>
          <td>{{ t.origen }}</td>
          <td>{{ t.destino }}</td>
        </tr>
        {% else %}
        <tr><td colspan="6" class="text-center text-muted">Sin transferencias</td></tr>
        {% endfor %}
      </tbody>

    </table>
  </div>
</div>

{% endblock %}
