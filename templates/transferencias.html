{% extends "base.html" %}
{% block titulo %}Transferencias{% endblock %}

{% block contenido %}
<h1 class="text-primary mb-4">Historial de transferencias</h1>

<form method="get" class="mb-3">
  <label class="form-label">Filtrar por destino</label>
  <select name="destino" class="form-select" onchange="this.form.submit()">
    <option value="">Todas</option>
    {% for b in ['Bogotá - Prado','Bogotá','Prado','Tocancipá'] %}
      <option value="{{ b }}" {{ 'selected' if sel_destino==b else '' }}>{{ b }}</option>
    {% endfor %}
  </select>
</form>

<table class="table table-striped table-bordered">
  <thead class="table-dark">
    <tr>
      <th>Fecha</th>
      <th>Producto</th>
      <th>Acabado</th>
      <th>Cantidad</th>
      <th>Origen</th>
      <th>Destino</th>
    </tr>
  </thead>

  <tbody>
    {% for t in transferencias %}
      <tr>
        <td>{{ t.fecha.strftime("%Y-%m-%d %H:%M") }}</td>
        <td>{{ t.producto_nombre }}</td>
        <td>{{ t.acabado }}</td>
        <td>{{ t.cantidad }}</td>
        <td>{{ t.origen }}</td>
        <td>{{ t.destino }}</td>
      </tr>
    {% else %}
      <tr><td colspan="6" class="text-center text-muted">No hay transferencias</td></tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
